Better Named Domain Configurator
================================================================================

If you run your own Bind9 nameserver(s) and you need to keep your forward
and reverse zones in sync, this tool is for you.

It's a WIP and English documentation is sparse, but example directory should
contain working configuration.

What makes this tool different (ie why I wrote it) ?
- templates files (with !var and !CMD tokens) try to closely resemble zone file,
making migration easy
- what is not recognized as BNDC token goes to the zone (ie you can put any
records you wish to your zone file)
- reverse zones are generated from A records (not limited to a single forward
zone) and you can customize them with !PTR commands and PTR records and whatever
other records you wish.

IPV6 is not supported yet, but as mentioned above, you can put AAAA records
to the zone directly.

Visit http://www.dlang.org for up to date D compiler.

===============================================================================

Konfiguracni syntaxe / Configuration syntax
-------------------------------------------

!variable = value [!var=value]
!variable = "val ue"
!variable = `echo "hello"`
!variable = "value !var"
!variable = ""
 - mezery mimo uvozovky se ignoruji
 - nove nastavni promene prepise predchozi hodnotu
 - neexistujici promena vrati null string

!command(argument)
 - argument se vyhodnocuje dle prikazu
 - opakovane nastaveni znamena opakovane volani

config.tpl - se cte na zacatku / first file to read

System nastavuje / Systems sets:
!host - posledni hostname z A, AAAA, H prikazu
!zone - domena
!zonefile - zonovy soubor
!version - S/N zony
!rrttl - nastavi prazdne na zacatku zony

Prikazy / Commands:
!TTL(1d) - $TTL 1d
!SOA(zone.cz) - zone.cz SOA !nsname !maintname (!version !refresh !retry !expire !negttl)
!NS(ns1.domain.cz., ns2) - vygeneruje NS zaznamy
!MX(10 mail.domena.cz.)
!A(host, 10.20.30.40)
!AAAA(host6, aa:bb::01)
!H(some.host.com.)
!CNAME(nazev)
!PTR(10, host.domain.com.) - prida PTR zaznam do interni databaze (ale do zony
	nevlozi, ma smysl jen v sablonach reverzni zony)
!DOMAIN(domena.cz, also-notify {109.123.212.22;})
!REVERSE(10.20.30)



Poznamky k modulum programu
---------------------------

vars - gloablni asociativni pole var, kde klic je nazev promenne (!var) z
sablon. Promenne se ukladaji samostatne pro kazdou zonu. Neexistujici
promenna vrati prazdny retezec.

cmds - globalni asociativni pole cmd, kde klic je nezev prikazu a hodnota je
callback delegat, ktery se vola z parseru.

eparser - parser, vstup a vystup pomoci struktury Element. Pred pouzitim
nutno mit nastavene pole cmd a take nastavit onSet, onVar a onCmd delegaty.

ipaddr - ip adresa vcetne masky a konverze z/do retezce

hosts - interni databaze hostu a ip adres hostdb. Pouziva se hlavne pro generovani
reverznich zon. Udrzuje seznam pripojenych IP adres k danemu hostname a
obracene. U kazdeho zaznamu je i polozka changed, oznacujici, jestli se dany
zaznam zmenil. Do databaze uklada modul scanzone.

scanzone - nacte z vygenerovaneho zonoveho souboru zaznamy do databaze. Je
to nutne, aby se nacetly i data nezpracovana parserem. Zatim nacita pouze A
zaznamy.

zones - trida k ukladani pomocnych informaci k zone (nazvy souboru, S/N, apod).
